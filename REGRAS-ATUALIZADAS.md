# Atomic rules implemented in Seer

- **Explosions**: Any capture (including en passant) triggers a blast centered on the **destination square (mv.to())** plus its 8 neighbours (king attack pattern). For normal captures, this is the square of the captured piece. For en passant, this is where the capturing pawn moves to, NOT the square of the captured pawn. The blast removes all non-pawn pieces in that area for both sides, including kings. Pawns are only removed if they are at the EXACT center of the explosion (destination square), not adjacent squares. If the blast would hit our king, the move is **ILLEGAL**, even if the enemy king also dies. You cannot sacrifice your own king.
- **Checks**: Direct check works like standard chess, except if both kings end up adjacent after the move; adjacent kings are mutually "not in check". Indirect checks (exposing the king to a future blast) are allowed. Moves leaving us in direct check are illegal.
- **Capturing the king**: A direct capture of the enemy king is allowed only if the blast does not include our king (king dies via the blast, not the capture itself).
- **King moves**: The king never captures in move generation; only quiet king moves are generated. Adjacent kings are legal; they do not check each other.
- **Castling**: Standard occupancy and rights are required, plus no direct check on the starting square or along the king's path. The destination must also be free of direct check; blast rules still apply.
- **En passant**: Treated as a capture with the blast centered on the **destination square** (where the capturing pawn moves to), NOT the square of the captured pawn. The captured pawn is removed from its original square (mv.enpassant_sq()). The capturing pawn explodes at the destination. Pawns adjacent to the explosion center survive. Illegal if our king is in that blast.
- **Pawns**: Push/attack directions follow orthodox chess. Promotions are orthodox (to N/B/R/Q).
- **Explosion immunity**: Pawns survive blasts UNLESS they are at the exact center of the explosion; pawns on adjacent squares survive. All other pieces (including kings) are removed if in the blast radius.
